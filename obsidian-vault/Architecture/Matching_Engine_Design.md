# Matching Engine Design

**Author:** Chief Orchestrator (Gemini)
**Status:** In Progress

## 1. Overview

This document outlines the design for the Matching Engine, a core component of the Conductor™ Adaptive Resource Optimization system. The Matching Engine will be responsible for intelligently matching incoming tasks with the most suitable human and AI resources based on a set of defined criteria.

## 2. Core Principles

*   **Optimal Matching:** Maximize the fit between task requirements and resource capabilities.
*   **Dynamic Adaptation:** Adjust matching decisions based on real-time changes in resource availability and workload.
*   **Prioritization:** Ensure high-priority tasks are matched with resources promptly.
*   **Scalability:** The design should support a large number of tasks and resources.

## 3. Components

*   **Task Parser:**
    *   Extracts key attributes from incoming tasks, such as:
        *   Required skills (e.g., `python`, `machine_learning`, `geriatric_care`).
        *   Priority level.
        *   Location (for human caregivers).
        *   Estimated duration.
*   **Resource Selector:**
    *   Filters the pool of available resources based on initial criteria (e.g., only available resources, resources in the correct location).
    *   Utilizes the `ResourceProfiler` to get up-to-date resource information.
*   **Scoring Mechanism:**
    *   Assigns a score to each potential resource-task match based on:
        *   **Skill Alignment:** How well the resource's skills match the task's requirements.
        *   **Workload Balance:** Prefer resources with lower current workload.
        *   **Proximity (for human agents):** Closer resources get a higher score.
        *   **Availability:** Penalize resources that are not immediately available.
        *   **Historical Performance:** (Future enhancement) Factor in past success rates.
*   **Decision Engine:**
    *   Selects the optimal resource based on the scores generated by the Scoring Mechanism.
    *   Can employ various strategies (e.g., highest score, first available, round-robin for load balancing).
*   **Assignment Handler:**
    *   Updates the selected resource's profile (e.g., increases `current_workload`, sets `availability` to busy).
    *   Delegates the task to the chosen resource (via the `WorkflowExecutor`).

## 4. Integration Points

*   **Conductor™ Workflow Engine:** Receives tasks for matching, delegates tasks to selected resources.
*   **ResourceProfiler:** Retrieves real-time resource profiles.
*   **Agents Table (Database):** Updates resource profiles after assignment.
*   **Task Prioritization System:** Receives priority information for tasks.

## 5. Next Steps

The next step is to develop a prototype of the Task Parser and Scoring Mechanism components.
